{% extends "layout.html" %}

{% block script%}

    {% if message != Null %}
        <script>
            window.onload = function() {
                document.querySelector('#message').innerHTML = "{{ message }}";
            }
        </script>

    {% else %}
        <script>
            window.onload = function() {
                function greet(hello, delay){
                    for (let i = 0; i <= hello.length; i++) {
                        setTimeout(function() {
                        document.querySelector('#hello').innerHTML = hello.substring(0, i)
                    }, delay * (i));
                }}

                navigator.geolocation.getCurrentPosition(function(position){
                    loc = position.coords.latitude + ", " + position.coords.longitude;
                    hello = "Welcome to " + loc;
                    delay = 80;
                    greet(hello, delay)
                });
            }
        </script>
    {% endif %}
{% endblock %}

{% block title %}
    homepage
{% endblock %}

{% block main %}
    {% if message != Null %}
        <p style="color: red;" id="message"></p>
    {% else %}
        <h3 id='hello'></h3>
    {% endif %}
    <img src="/static/source.gif" style="width: 100%; height: 100%;" alt="hi~ :)">
    <hr>
    <br>
    <form action="/login" method="post">
        <input autocomplete="off" autofocus name="username" placeholder="Username" type="text">
        <input name="password" placeholder="Password" type="password">
        <button class="submit" type="submit">Log In</button>
    </form>
    <br>
    <hr>
{% endblock %}